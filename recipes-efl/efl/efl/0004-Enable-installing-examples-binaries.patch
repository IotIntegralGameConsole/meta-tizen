From: "Eduardo Lima (Etrunko)" <eduardo.lima@intel.com>
Date: Tue, 25 Feb 2014 18:13:21 -0300
Subject: Enable installing examples binaries

Change-Id: If903ba43c2c6591bd68c841b326d0e5a61dcdc10
Signed-off-by: Eduardo Lima (Etrunko) <eduardo.lima@intel.com>
---
 src/Makefile.am                        | 14 ++++++++++++--
 src/examples/ecore/Makefile.am         | 17 +++++++++--------
 src/examples/ecore_avahi/Makefile.am   |  5 +++++
 src/examples/edje/Makefile.am          | 15 +++++----------
 src/examples/eet/Makefile.am           |  7 ++-----
 src/examples/eina/Makefile.am          |  7 ++-----
 src/examples/eio/Makefile.am           |  7 ++-----
 src/examples/eldbus/Makefile.am        |  7 ++-----
 src/examples/emotion/Makefile.am       |  7 ++-----
 src/examples/eo/Makefile.am            |  7 ++-----
 src/examples/ephysics/Makefile.am      |  7 ++-----
 src/examples/ethumb_client/Makefile.am |  7 ++-----
 src/examples/evas/Makefile.am          |  9 +++------
 13 files changed, 50 insertions(+), 66 deletions(-)

diff --git a/src/Makefile.am b/src/Makefile.am
index e797d57..1abd6f0 100644
--- a/src/Makefile.am
+++ b/src/Makefile.am
@@ -78,10 +78,14 @@ examples/ecore \
 examples/ecore_avahi \
 examples/eio \
 examples/eldbus \
-examples/ephysics \
 examples/edje \
 examples/emotion \
 examples/ethumb_client
+
+if HAVE_EPHYSICS
+EXAMPLES_SUBDIRS += examples/ephysics
+endif
+
 if ALWAYS_BUILD_EXAMPLES
 SUBDIRS += . $(EXAMPLES_SUBDIRS)
 endif
@@ -90,7 +94,7 @@ DIST_SUBDIRS += $(EXAMPLES_SUBDIRS)
 examples: all-am
 	@for d in $(EXAMPLES_SUBDIRS); do \
 	   echo "Making examples in $$d"; \
-	   $(MAKE) $(AM_MAKEFLAGS) -C $$d examples || exit 1; \
+	   $(MAKE) $(AM_MAKEFLAGS) -C $$d || exit 1; \
 	done
 
 install-examples:
@@ -99,6 +103,12 @@ install-examples:
 	   $(MAKE) $(AM_MAKEFLAGS) -C $$d install-examples || exit 1; \
 	done
 
+install-built-examples:
+	@for d in $(EXAMPLES_SUBDIRS); do \
+	   echo "Making install-built-examples in $$d"; \
+	   $(MAKE) $(AM_MAKEFLAGS) -C $$d install || exit 1; \
+	done
+
 clean-local:
 	find . -type f -name '*.gcno' -delete
 	find . -type f -name '*.gcda' -delete
diff --git a/src/examples/ecore/Makefile.am b/src/examples/ecore/Makefile.am
index 914eb43..946609d 100644
--- a/src/examples/ecore/Makefile.am
+++ b/src/examples/ecore/Makefile.am
@@ -231,9 +231,6 @@ ecore_getopt_example_LDADD = $(ECORE_COMMON_LDADD)
 
 SRCS = \
 ecore_animator_example.c \
-ecore_audio_custom.c \
-ecore_audio_playback.c \
-ecore_audio_to_ogg.c \
 ecore_client_bench.c \
 ecore_con_client_example.c \
 ecore_con_client_simple_example.c \
@@ -272,11 +269,19 @@ ecore_time_functions_example.c \
 ecore_timer_example.c \
 ecore_getopt_example.c
 
+if HAVE_ECORE_AUDIO
+#SRCS += \
+#ecore_audio_custom.c \
+#ecore_audio_playback.c \
+#ecore_audio_to_ogg.c
+endif
+
 DATA_FILES = red.png Makefile.examples
 
 EXTRA_DIST = $(DATA_FILES)
 
-examples: $(EXTRA_PROGRAMS)
+examplesdir = $(libdir)/ecore/examples
+examples_PROGRAMS = $(EXTRA_PROGRAMS)
 
 clean-local:
 	rm -f $(EXTRA_PROGRAMS)
@@ -289,7 +294,3 @@ uninstall-local:
 	for f in $(SRCS) $(DATA_FILES); do \
 	  rm -f $(datadir)/ecore/examples/$$f ; \
 	done
-
-if ALWAYS_BUILD_EXAMPLES
-noinst_PROGRAMS = $(EXTRA_PROGRAMS)
-endif
diff --git a/src/examples/ecore_avahi/Makefile.am b/src/examples/ecore_avahi/Makefile.am
index d447d65..61aa18b 100644
--- a/src/examples/ecore_avahi/Makefile.am
+++ b/src/examples/ecore_avahi/Makefile.am
@@ -24,6 +24,11 @@ $(top_builddir)/src/lib/eina/libeina.la \
 
 examples: $(EXTRA_PROGRAMS)
 
+EXTRA_DIST = ecore_avahi_example.c
+
+examplesdir = $(libdir)/ecore_avahi/examples
+examples_PROGRAMS = $(EXTRA_PROGRAMS)
+
 clean-local:
 	rm -f $(EXTRA_PROGRAMS)
 
diff --git a/src/examples/edje/Makefile.am b/src/examples/edje/Makefile.am
index 49d7df8..3e2d677 100644
--- a/src/examples/edje/Makefile.am
+++ b/src/examples/edje/Makefile.am
@@ -192,23 +192,18 @@ if HAVE_EPHYSICS
 LDADD += $(top_builddir)/src/lib/ephysics/libephysics.la
 endif
 
-examples: $(EXTRA_PROGRAMS) $(EDJS)
+examplesdir = $(libdir)/edje/examples
+examples_PROGRAMS = $(EXTRA_PROGRAMS)
+examples_DATA = $(EDJS)
 
 clean-local:
 	rm -f $(EXTRA_PROGRAMS) $(EDJS) $(CODEGEN_GENERATED)
 
-install-examples: $(EDJS)
+install-examples:
 	mkdir -p $(datadir)/edje/examples
-	$(install_sh_DATA) -c $(SRCS) $(EDJS) $(DIST_EDCS) $(DATA_FILES) $(datadir)/edje/examples
+	$(install_sh_DATA) -c $(SRCS) $(DIST_EDCS) $(DATA_FILES) $(datadir)/edje/examples
 
 uninstall-local:
 	for f in $(SRCS) $(DIST_EDCS) $(DATA_FILES); do \
 	  rm -f $(datadir)/edje/examples/$$f ; \
 	done
-
-if ALWAYS_BUILD_EXAMPLES
-if BUILD_LOADER_PNG
-noinst_PROGRAMS = $(EXTRA_PROGRAMS)
-nodist_pkgdata_DATA = $(EDJS)
-endif
-endif
diff --git a/src/examples/eet/Makefile.am b/src/examples/eet/Makefile.am
index 800769a..ffe1f4a 100644
--- a/src/examples/eet/Makefile.am
+++ b/src/examples/eet/Makefile.am
@@ -44,7 +44,8 @@ DATA_FILES = Makefile.examples
 
 EXTRA_DIST = $(DATA_FILES)
 
-examples: $(EXTRA_PROGRAMS)
+examplesdir = $(libdir)/eet/examples
+examples_PROGRAMS = $(EXTRA_PROGRAMS)
 
 clean-local:
 	rm -f $(EXTRA_PROGRAMS)
@@ -57,7 +58,3 @@ uninstall-local:
 	for f in $(SRCS) $(DATA_FILES); do \
 	  rm -f $(datadir)/eet/examples/$$f ; \
 	done
-
-if ALWAYS_BUILD_EXAMPLES
-noinst_PROGRAMS = $(EXTRA_PROGRAMS)
-endif
diff --git a/src/examples/eina/Makefile.am b/src/examples/eina/Makefile.am
index 6c1abde..09036f1 100644
--- a/src/examples/eina/Makefile.am
+++ b/src/examples/eina/Makefile.am
@@ -140,7 +140,8 @@ DATA_FILES = addr_book.txt chat.xml Makefile.examples
 
 EXTRA_DIST = $(DATA_FILES)
 
-examples: $(EXTRA_PROGRAMS)
+examplesdir = $(libdir)/eina/examples
+examples_PROGRAMS = $(EXTRA_PROGRAMS)
 
 clean-local:
 	rm -f $(EXTRA_PROGRAMS)
@@ -153,7 +154,3 @@ uninstall-local:
 	for f in $(SRCS) $(DATA_FILES); do \
 	  rm -f $(datadir)/eina/examples/$$f ; \
 	done
-
-if ALWAYS_BUILD_EXAMPLES
-noinst_PROGRAMS = $(EXTRA_PROGRAMS)
-endif
diff --git a/src/examples/eio/Makefile.am b/src/examples/eio/Makefile.am
index 6b04de9..9fc5871 100644
--- a/src/examples/eio/Makefile.am
+++ b/src/examples/eio/Makefile.am
@@ -43,7 +43,8 @@ DATA_FILES = Makefile.examples
 
 EXTRA_DIST = $(DATA_FILES)
 
-examples: $(EXTRA_PROGRAMS)
+examplesdir = $(libdir)/eio/examples
+examples_PROGRAMS = $(EXTRA_PROGRAMS)
 
 clean-local:
 	rm -f $(EXTRA_PROGRAMS)
@@ -56,7 +57,3 @@ uninstall-local:
 	for f in $(SRCS) $(DATA_FILES); do \
 	  rm -f $(datadir)/eio/examples/$$f ; \
 	done
-
-if ALWAYS_BUILD_EXAMPLES
-noinst_PROGRAMS = $(EXTRA_PROGRAMS)
-endif
diff --git a/src/examples/eldbus/Makefile.am b/src/examples/eldbus/Makefile.am
index e0c79b3..a4b90bc 100644
--- a/src/examples/eldbus/Makefile.am
+++ b/src/examples/eldbus/Makefile.am
@@ -77,7 +77,8 @@ DATA_FILES = Makefile.examples
 
 EXTRA_DIST = $(DATA_FILES)
 
-examples: $(EXTRA_PROGRAMS)
+examplesdir = $(libdir)/eldbus/examples
+examples_PROGRAMS = $(EXTRA_PROGRAMS)
 
 clean-local:
 	rm -f $(EXTRA_PROGRAMS)
@@ -90,7 +91,3 @@ uninstall-local:
 	for f in $(SRCS) $(DATA_FILES); do \
 	  rm -f $(datadir)/eldbus/examples/$$f ; \
 	done
-
-if ALWAYS_BUILD_EXAMPLES
-noinst_PROGRAMS = $(EXTRA_PROGRAMS)
-endif
diff --git a/src/examples/emotion/Makefile.am b/src/examples/emotion/Makefile.am
index 4c66045..dd58e4a 100644
--- a/src/examples/emotion/Makefile.am
+++ b/src/examples/emotion/Makefile.am
@@ -43,7 +43,8 @@ DATA_FILES = Makefile.examples
 
 EXTRA_DIST = $(DATA_FILES)
 
-examples: $(EXTRA_PROGRAMS)
+examples_PROGRAMS = $(EXTRA_PROGRAMS)
+examplesdir = $(libdir)/emotion/examples
 
 clean-local:
 	rm -f $(EXTRA_PROGRAMS)
@@ -56,7 +57,3 @@ uninstall-local:
 	for f in $(SRCS) $(DATA_FILES); do \
 	  rm -f $(datadir)/emotion/examples/$$f ; \
 	done
-
-if ALWAYS_BUILD_EXAMPLES
-noinst_PROGRAMS = $(EXTRA_PROGRAMS)
-endif
diff --git a/src/examples/eo/Makefile.am b/src/examples/eo/Makefile.am
index 8c47bb4..f02508a 100644
--- a/src/examples/eo/Makefile.am
+++ b/src/examples/eo/Makefile.am
@@ -68,7 +68,8 @@ DATA_FILES = Makefile.examples
 
 EXTRA_DIST = $(DATA_FILES)
 
-examples: $(EXTRA_PROGRAMS)
+examplesdir = $(libdir)/eo/examples
+examples_PROGRAMS = $(EXTRA_PROGRAMS)
 
 clean-local:
 	rm -f $(EXTRA_PROGRAMS)
@@ -98,7 +99,3 @@ uninstall-local:
 	for f in $(eo_evas_SOURCES) ; do \
 	  rm -f $(datadir)/eo/examples/evas/$$f ; \
 	done
-
-if ALWAYS_BUILD_EXAMPLES
-noinst_PROGRAMS = $(EXTRA_PROGRAMS)
-endif
diff --git a/src/examples/ephysics/Makefile.am b/src/examples/ephysics/Makefile.am
index fc2c18f..ff982b7 100644
--- a/src/examples/ephysics/Makefile.am
+++ b/src/examples/ephysics/Makefile.am
@@ -75,7 +75,8 @@ EXTRA_DIST = $(SRCS)
 # test_slider.c \
 # test_velocity.c
 
-examples: $(EXTRA_PROGRAMS)
+examplesdir = $(libdir)/ephysics/examples
+examples_PROGRAMS = $(EXTRA_PROGRAMS)
 
 clean-local:
 	rm -f $(EXTRA_PROGRAMS)
@@ -88,7 +89,3 @@ uninstall-local:
 	for f in $(SRCS) ; do \
 	  rm -f $(datadir)/ephysics/examples/$$f ; \
 	done
-
-if ALWAYS_BUILD_EXAMPLES
-noinst_PROGRAMS = $(EXTRA_PROGRAMS)
-endif
diff --git a/src/examples/ethumb_client/Makefile.am b/src/examples/ethumb_client/Makefile.am
index f0bf7b4..7930263 100644
--- a/src/examples/ethumb_client/Makefile.am
+++ b/src/examples/ethumb_client/Makefile.am
@@ -44,7 +44,8 @@ DATA_FILES = Makefile.examples
 
 EXTRA_DIST = $(DATA_FILES)
 
-examples: $(EXTRA_PROGRAMS)
+examplesdir = $(libdir)/ethumb_client/examples
+examples_PROGRAMS = $(EXTRA_PROGRAMS)
 
 clean-local:
 	rm -f $(EXTRA_PROGRAMS)
@@ -57,7 +58,3 @@ uninstall-local:
 	for f in $(SRCS) $(DATA_FILES); do \
 	  rm -f $(datadir)/ethumb_client/examples/$$f ; \
 	done
-
-if ALWAYS_BUILD_EXAMPLES
-noinst_PROGRAMS = $(EXTRA_PROGRAMS)
-endif
diff --git a/src/examples/evas/Makefile.am b/src/examples/evas/Makefile.am
index 2b1a7c1..48a3299 100644
--- a/src/examples/evas/Makefile.am
+++ b/src/examples/evas/Makefile.am
@@ -208,7 +208,9 @@ im1.png \
 cube1.png \
 Makefile.examples
 
-examples: $(EXTRA_PROGRAMS) $(EDJS)
+examplesdir = $(libdir)/evas/examples
+examples_PROGRAMS = $(EXTRA_PROGRAMS)
+examples_DATA = $(EDJS)
 
 clean-local:
 	rm -f $(EXTRA_PROGRAMS) $(EDJS)
@@ -223,8 +225,3 @@ uninstall-local:
 	done
 
 EXTRA_DIST = $(EDCS) $(DATA_FILES)
-
-if ALWAYS_BUILD_EXAMPLES
-noinst_PROGRAMS = $(EXTRA_PROGRAMS)
-nodist_pkgdata_DATA = $(EDJS)
-endif
